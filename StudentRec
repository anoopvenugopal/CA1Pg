import time
import sys
import re

class StudentRec:    
    def __init__(self,stId,stname,coursecode):
        self.stId=stId
        self.stname=stname
        self.coursecode=coursecode    
        
    def showall(self):                 #to view all students          
        print(self.stId,end='\t\t')
        print(self.stname,end='\t\t')
        print(self.coursecode)
# manipulation
class StudentHandler:

    def add(self,student):             #appending data to list
        st.append(student)
        
    def sort(self,st):                 #bubble sort for sorting
        for i in range(len(st)):
            for j in range(i+1,len(st)):
                if(int(st[i].stId)>int(st[j].stId)):
                    st[i],st[j]=st[j],st[i]
        return st
    
    def retrieve(self):                #remove the student having lowest IdNo 
        fStd=st[0]
        st.pop(0)
        return fStd
        
st=list()
stud=StudentHandler()
while(True):
    choice=int(input(" 1: Press 1 to add students.\n 2: Press 2 to View all students.\n 3: Press 3 to pop the student with lowest ID.\n"))
    if choice==1:
        n=int(input('Enter no of students : '))
        
        print('Students details entry....')
        
        for i in range(n):
            print('Student : ',i+1)
            stId=input('\tID:')
            check=re.match("[0-9]{8}$",stId)
            while(not check):             
                print("\n Id must be 8 integers.")
                stId=input('\tID:')
                check=re.match("[0-9]{8}$",stId)
                
            stname=input('\tName:')
            
            coursecode=input('\tCourseCode:')
            while(not len(coursecode)==7):
                print("\n The course id must be 7 characters long.")
                coursecode=input('\tCourseCode:')
            std=(StudentRec(stId,stname,coursecode))
            stud.add(std)
        print('Successfuly added students to Record')
        #start=time.time()
        #st=stud.sort(st)
        #print(time.time()-start)
        
    elif choice==2:                 # for showall data
        st=stud.sort(st)
        if (len(st)==0):
            print('****List empty****')
        else:
            print('Student Information')
            print('ID\t\tName\t\tCourseCode')
            for i in range(len(st)):
                st[i].showall()
    elif choice==3:
        st=stud.sort(st)
        if (len(st)==0):
            print('****List empty****')
        else:
            a=stud.retrieve()
            print(' Id :'+a.stId+'\tName :'+a.stname+'\tCoursecode :'+a.coursecode)
            print('\nNew updated list\n')
            print('ID\t\tName\t\tCourseCode')
            for i in range(len(st)):
                st[i].showall()
            

    userch=input("\n Enter Y to continue or Press anykey to exit.")
    if userch=='Y' or userch=='y':
        continue
    else:
        print('Bye')
        sys.exit()
    

